sudo: required
language: objective-c
osx_image: xcode9.3
before_install:
- rvm install 2.5.1 --disable-binary
- brew install pandoc
- brew cask install calibre
- npm install -g gitbook-cli
- gem install asciidoctor
script:
- "./Tools/gendocs.sh"
deploy:
  provider: releases
  api_key:
    secure: rjKVJzWtqfYoae0p/uw9o2AnkHs18/Po8oaEdOPJoHqYX5CF8Mdde9XAl+dbTiJVOcsgG7QoYRWHnCwkFEbgy5U/zszZ2u5HA2gYvFKPCc5JrrLlyfPSvzhOTSn1eG+U4i+2EBKtnESP4b8XisTY/OWRAJGvOXF88m/m5wv3Bu1UPr076+GJS4Q1FeJNpXwNyBrJUcGQDnzAFCdVg2vGAO2bl9BQZU7NZ7ipcvFQzzes4reOTu6qOQXCmGj349b5C/Bg0l26hRUf+Aidu5KvnUJGUzVGleXhWvPN/t7I0fNYbgCOc4b85aivwhzV8AWpQj/bkcNuB33dPCj9tOgva7muiVGSAVMOL+4vkgio+BlXSSLTa5rau6VlcqT/CR73wbJ/8QAauZWMIFwGdPirSnLIf7PJS4/SX4zY4lGuhGYBA6n4ESthhVT0vUsx1JsYfhD3YgTbsrH2Ak7bP1hYMh0aWSMII9pvEawEXUr/0b+61ua7MJV9CVPKN/6y+4p7B9rGs1siIzVCrGi0bmsPqGMn2lfd3tbCC0WEtj2p0dlSsjvMKoDhk/oiNjNtNT28IaFaT/z+2+m1oit+ROt1wfXBh/XzxXZVez/pnHKcwJqgPjVOIwtuidULsxSOn8pwie913cJ0GhtqT7DVoyVxvocifDQ0pGhAO8fTU+0KHEg=
  file:
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document.pdf"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-es.pdf"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-fr.pdf"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-de.pdf"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-ja.pdf"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-ru.pdf"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-zhtw.pdf"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document.mobi"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-es.mobi"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-fr.mobi"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-de.mobi"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-ja.mobi"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-ru.mobi"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-zhtw.mobi"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document.epub"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-ru.epub"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-es.epub"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-fr.epub"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-de.epub"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-ja.epub"
    - "$TRAVIS_BUILD_DIR/Generated/OWASP_Mobile_AppSec_Verification_Standard_$TRAVIS_TAG_Document-zhtw.epub"
    - "$TRAVIS_BUILD_DIR/Generated/MASVS.docx"
    - "$TRAVIS_BUILD_DIR/Generated/MASVS-de.docx"
    - "$TRAVIS_BUILD_DIR/Generated/MASVS-es.docx"
    - "$TRAVIS_BUILD_DIR/Generated/MASVS-fr.docx"
    - "$TRAVIS_BUILD_DIR/Generated/MASVS-ja.docx"
    - "$TRAVIS_BUILD_DIR/Generated/MASVS-ru.docx"
    - "$TRAVIS_BUILD_DIR/Generated/MASVS-zhtw.docx"
  skip_cleanup: true
  overwrite: true
  name: "Intermediate update $TRAVIS_TAG"
  body: "Intermediate update ($TRAVIS_TAG). See CHANGELOG.md for updates on intermediate update releases."
  on:
    repo: OWASP/owasp-masvs
    tags: true
